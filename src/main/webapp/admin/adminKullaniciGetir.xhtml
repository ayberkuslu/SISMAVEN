<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">


    <h:head>
        <title>Kisisel Bilgi </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet library="css" name="columns.css"/>
        <h:outputStylesheet library="css" name="menuStyle.css" />
    </h:head>
    <h:body>
        <h:form id="form">

            <div class="ui-g">
                <div class="ui-g-3" >
                    <div class="topLeftBar" >
                        <ui:include src="../default/defaultTopLeftBar.xhtml"   />
                    </div>                   
                </div>
                <div class="ui-g-9"   >
                    <div styleClass="topmenu" >
                        <ui:include src="../default/defaultTopBar.xhtml"   />
                    </div>
                </div>
            </div>


            <div class="ui-g"  >
                <div class="ui-g-3">
                    <div class="sidenav" >
                        <ui:include src="../default/defaultMenu.xhtml"   />
                    </div>
                </div>

                <div class="ui-g-9" style="margin-left: 25%; margin-top: 91px;">
                    <p:messages showIcon="false"  >
                        <p:autoUpdate/>
                    </p:messages>

                    <p:panel 
                        id="panel1" header="Users" toggleable="true" closable="true" closeTitle="Kapat" toggleableHeader="true"
                        toggleSpeed="500" closeSpeed="500" widgetVar="panel" style="margin-bottom:20px; margin-top: 20px; margin-right: 3%; margin-left: 3%;" 
                        >
                        <h1><h:outputText value="List"/></h1>

                        <p:dataTable 
                            id="userTable"
                            var="item" 
                            value="#{kullaniciGetirController.users}"
                            selectionMode="single" 
                            selection="#{kullaniciGetirController.selectedUser}" 
                            rowKey="#{item.userId}" 
                            rows="10"
                            paginator="true"  paginatorPosition="bottom"
                            lazy="true" 
                            paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            style="width: 90%;margin-left: 3%; margin-right: 3%;"
                            >

                            <p:ajax event="rowSelect"  
                                    update=":form:panel2 @this @parent "
                                    process="@parent"
                                    listener="#{kullaniciGetirController.onRowSelect}" 
                                    />
                            <p:column sortBy="#{item.userId}" filterBy="#{item.userId}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="UserId"/>
                                </f:facet>
                                <h:outputText value="#{item.userId}"/>
                            </p:column>
                            <p:column headerText="TCKN" filterBy="#{item.tckn}" filterMatchMode="contains" >

                                <h:outputText value="#{item.tckn}"/>


                            </p:column>
                            <p:column headerText="NAME" filterBy="#{item.name}" filterMatchMode="contains" >
                                <h:outputText value="#{item.name}"/>

                            </p:column>
                            <p:column headerText="SURNAME"  filterBy="#{item.surname}" filterMatchMode="contains">

                                <h:outputText value="#{item.surname}"/>
                            </p:column  >
                            <p:column headerText="EMAIL" filterBy="#{item.email}" filterMatchMode="contains" >

                                <h:outputText value="#{item.email}"/>
                            </p:column>
                            <p:column  filterBy="#{item.status}"  filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Status"/>
                                </f:facet>
                                <h:outputText value="#{item.aktif}"/>
                            </p:column>
                            <p:column  filterBy="#{item.type}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Type"/>
                                </f:facet>
                                <h:outputText value="#{item.kullaniciTipi()}"/>
                            </p:column>

                        </p:dataTable>
                    </p:panel>
                    <br/>
                    
                    <p:commandButton value="Active" 
                                     action="#{kullaniciGetirController.deleteSelectedUser()}"
                                     styleClass="insertButton" style=""
                                     />
                    <p:commandButton value="Passive" 
                                     action="#{kullaniciGetirController.deleteSelectedUser()}"
                                     styleClass="insertButton declineButton" 
                                     />
                    

                    
                    <br/>
                    
                    
                    <p:accordionPanel id="panel2" 
                                      style="margin-bottom:20px; margin-top: 20px; margin-right: 3%; margin-left: 3%;" 
                                      >

                        <p:tab id="userCourseOrClass" title="Ders Bilgisi"  closable="true" >


                            <h1><h:outputText value="Alinan Dersler"  rendered="#{not empty kullaniciGetirController.selectedUserClassesList}" /></h1>

                            <p:dataTable  value="#{kullaniciGetirController.selectedUserClassesList}" var="abc" rendered="#{not empty kullaniciGetirController.selectedUserClassesList}" >

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="ClassesID"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.classesId}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Course Name"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.courseId.courseName}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ogrenci"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.userId.name} #{abc.userId.surname}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Vize Notu"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.vizeNot}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Final Notu"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.finalNot}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Grade"/>
                                    </f:facet>
                                    <h:outputText value="#{abc.grade}"/>
                                </p:column>
                            </p:dataTable>

                            <h1 ><h:outputText value="Verilen Dersler" rendered="#{not empty kullaniciGetirController.selectedUserCoursesList}"/></h1>

                            <p:dataTable value="#{kullaniciGetirController.selectedUserCoursesList}" var="course" rendered="#{not empty kullaniciGetirController.selectedUserCoursesList}" >

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="CourseId" />
                                    </f:facet>
                                    <h:outputText value="#{course.courseId}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Status"/>
                                    </f:facet>
                                    <h:outputText value="#{course.aktif}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="CurrentSize"/>
                                    </f:facet>
                                    <h:outputText value="#{course.currentSize}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="MaxSize"/>
                                    </f:facet>
                                    <h:outputText value="#{course.maxSize}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="UserId"/>
                                    </f:facet>
                                    <h:outputText value="#{course.userId}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="TermId"/>
                                    </f:facet>
                                    <h:outputText value="#{course.termId}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="CourseName"/>
                                    </f:facet>
                                    <h:outputText value="#{course.courseName}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Personal Info"  closable="true" id="userDetail">
                            <p:outputPanel id="userDetail2"  style="text-align:center;"    >
                                                            <h1 ><h:outputText value="Verilen Dersler" rendered="#{not empty kullaniciGetirController.selectedUserCoursesList}"/></h1>

                                <p:repeat id="test" value="#{kullaniciGetirController.selectedUserDetails.values}" var="detail">

                                    <p:panelGrid columns="2" style="padding-top: 40px;"   rendered="#{not empty kullaniciGetirController.selectedUser}"  >

                                                
                                        <h:outputText value="#{detail.name}" style="width: 200px !important;"  />
                                        <h:outputText value="#{detail.value}" style="width: 200px !important;"/> 

                                    </p:panelGrid>
                                </p:repeat>

                            </p:outputPanel>



                        </p:tab>
                        
<!--                        <p:tab 
                            id="userChange"
                            title="User Change Info"
                            >
                            
                            Only fill the areas that you want to change !<br/>
                            <h:outputText value="#{kullaniciGetirController.selectedUser.name}" />
                            
                            
                        </p:tab>-->



                    </p:accordionPanel>


                </div>

            </div>


        </h:form>

    </h:body>
</html>
