<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Kisisel Bilgi </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet library="css" name="columns.css"/>
        <h:outputStylesheet library="css" name="menuStyle.css" />
    </h:head>
    <h:body>
        <h:form id="form">

            <div class="ui-g">
                <div class="ui-g-3" >
                    <div class="topLeftBar" >
                        <ui:include src="../default/defaultTopLeftBar.xhtml"   />
                    </div>                   
                </div>
                <div class="ui-g-9"   >
                    <div styleClass="topmenu" >
                        <ui:include src="../default/defaultTopBar.xhtml"   />
                    </div>
                </div>
            </div>


            <div class="ui-g"  >
                <div class="ui-g-3">
                    <div class="sidenav" >
                        <ui:include src="../default/defaultMenu.xhtml"   />
                    </div>
                </div>

                <div class="ui-g-9" style="margin-left: 25%; margin-top: 91px;">
                    <!--<p:autoUpdate  />-->
                    <!--<div id="panel1">-->
<!--                    <p:growl id="msgs" showDetail="true"  >
                        <p:autoUpdate />
                    </p:growl>-->
                    <p:messages showIcon="false"  >
                        <p:autoUpdate/>
                    </p:messages>

                    <p:panel 
                        id="panel1" header="Users" toggleable="true" closable="true" closeTitle="Kapat" toggleableHeader="true"
                        toggleSpeed="500" closeSpeed="500" widgetVar="panel" style="margin-bottom:20px; margin-top: 40px;" 

                        >
                        <h1><h:outputText value="List"/></h1>

                        <p:dataTable 
                            id="userTable" var="item" value="#{kullaniciGetirController.users}"
                            selectionMode="single" selection="#{kullaniciGetirController.selectedUser}" 
                            rowKey="#{users.userId}"  rows="10"
                            paginator="true"  lazy="true" 
                            editable="true" editMode="cell"
                            paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            style="width: 90%;margin-left: 2%;"
                            >

                            <p:ajax event="rowSelect"  
                                    update=":form:panel2 :form:userDetail "
                                    listener="#{kullaniciGetirController.onRowSelect}"/>

                            <p:column sortBy="#{item.userId}" filterBy="#{item.userId}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="UserId"/>
                                </f:facet>
                                <h:outputText value="#{item.userId}"/>
                            </p:column>
                            <p:column  filterBy="#{item.tckn}" filterMatchMode="contains" >
                                <f:facet name="header">
                                    <h:outputText value="Tckn"/>
                                </f:facet>
                                <h:outputText value="#{item.tckn}"/>
                            </p:column>
                            <p:column  filterBy="#{item.name}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Name"/>
                                </f:facet>
                                <h:outputText value="#{item.name}"/>
                            </p:column>
                            <p:column  filterBy="#{item.surname}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Surname"/>
                                </f:facet>
                                <h:outputText value="#{item.surname}"/>
                            </p:column  >
                            <p:column  filterBy="#{item.email}" filterMatchMode="contains" >
                                <f:facet name="header">
                                    <h:outputText value="Email"/>
                                </f:facet>
                                <h:outputText value="#{item.email}"/>
                            </p:column>
                            <p:column  filterBy="#{item.status}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Status"/>
                                </f:facet>
                                <h:outputText value="#{item.aktif}"/>
                            </p:column>
                            <p:column  filterBy="#{item.type}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Type"/>
                                </f:facet>
                                <h:outputText value="#{item.kullaniciTipi()}"/>
                            </p:column>

                            <f:facet name="footer"> 
                                <p:commandButton process="userTable" update=":form:userDetail"
                                                 oncomplete="PF('userDialog').show()" 
                                                 icon="pi pi-search" value="Bilgi Goster"  
                                                 />
                            </f:facet>
                        </p:dataTable>
                    </p:panel>
                    <br/>

                    <br/>
                    <!--                    <p:commandButton process="dersListe" update="dersListe"
                                                         icon="pi pi-search" value="Ders Goster"  
                                                         />-->
                    <p:panel id="panel2" header="Ders Bilgisi" toggleable="true" 
                             closable="true" toggleSpeed="500" closeSpeed="500"
                             widgetVar="panel" style="margin-bottom:20px"
                             >

                        <f:view  >

                            <p:autoUpdate />

                            <h:form id="dersListe" >

                                <h1><h:outputText value="Alinan Dersler"  rendered="#{not empty kullaniciGetirController.selectedUserClassesList}" /></h1>
                                <p:dataTable  value="#{kullaniciGetirController.selectedUserClassesList}" var="item" rendered="#{not empty kullaniciGetirController.selectedUserClassesList}" >

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="ClassesID"/>
                                        </f:facet>
                                        <h:outputText value="#{item.classesId}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Course Name"/>
                                        </f:facet>
                                        <h:outputText value="#{item.courseId.courseName}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Ogrenci"/>
                                        </f:facet>
                                        <h:outputText value="#{item.userId.name} #{item.userId.surname}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Vize Notu"/>
                                        </f:facet>
                                        <h:outputText value="#{item.vizeNot}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Final Notu"/>
                                        </f:facet>
                                        <h:outputText value="#{item.finalNot}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Grade"/>
                                        </f:facet>
                                        <h:outputText value="#{item.grade}"/>
                                    </p:column>
                                </p:dataTable>
                            </h:form>

                            <h:form id="courseListe"    >
                                <h1 ><h:outputText value="Verilen Dersler" rendered="#{not empty kullaniciGetirController.selectedUserCoursesList}"/></h1>

                                <p:dataTable value="#{kullaniciGetirController.selectedUserCoursesList}" var="item" rendered="#{not empty kullaniciGetirController.selectedUserCoursesList}" >

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="CourseId" />
                                        </f:facet>
                                        <h:outputText value="#{item.courseId}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Status"/>
                                        </f:facet>
                                        <h:outputText value="#{item.aktif}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="CurrentSize"/>
                                        </f:facet>
                                        <h:outputText value="#{item.currentSize}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="MaxSize"/>
                                        </f:facet>
                                        <h:outputText value="#{item.maxSize}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="UserId"/>
                                        </f:facet>
                                        <h:outputText value="#{item.userId}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="TermId"/>
                                        </f:facet>
                                        <h:outputText value="#{item.termId}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="CourseName"/>
                                        </f:facet>
                                        <h:outputText value="#{item.courseName}"/>
                                    </p:column>
                                </p:dataTable>
                            </h:form>
                        </f:view>




                    </p:panel>



                    <!--<p:commandButton value="Getir" update="selected" action="#{kullaniciGetirController.loadData()}" style="width: 100px; height:60px;background: blue;" />-->

                    <p:dialog header="User Detail" widgetVar="userDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                        <h:form id="userDetail">
                            <p:repeat id="test" value="#{kullaniciGetirController.selectedUserDetails.values}" var="detail">
                                <p:outputPanel id="userDetail2" style="text-align:center;" >
                                    <p:panelGrid  columns="2" rendered="#{not empty kullaniciGetirController.selectedUser}"  >
                                        <f:facet name="header">

                                        <!--<p:graphicImage name="demo/images/car/#{dtLazyView.selectedCar.brand}-big.gif"/>-->
                                        </f:facet>
                                        <h:outputText value="#{detail.name}" style="width: 100px !important; height: 180px; text-align: left;" />
                                        <h:outputText value="#{detail.value}" style="width: 100px !important; height: 60px; text-align: right;" />



                                    </p:panelGrid>
                                </p:outputPanel>
                            </p:repeat>
                        </h:form>

                    </p:dialog>

                    <!--</div>-->
                    <!--<div id="panel2">-->


                    <!--</div>-->




                </div>

            </div>


        </h:form>

    </h:body>
</html>
